<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NUMBLE CHALLENGE</title>
  </head>
  <body>
    <nav>
      <a href="#home">Home</a>
      <a href="#posting">Posting</a>
      <a href="#posts">Board</a>
    </nav>
    <div id="app"></div>
    <script>
      function postData() {
        const data = { key: "value" };
        fetch("http://43.201.103.199/", {
          method: "POST",
          body: JSON.stringify(data),
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => console.log(data))
          .catch((error) => console.error(error));
      }

      // Data
      const pages = {
        home: {
          title: "home",
          content: "Welcome to my SPA",
        },
        posting: {
          title: "Posting",
          content: "Welcome to post something",
        },
        posts: {
          title: "Posts",
          content: "Here are posts",
          postsList: [],
        },
        post: {
          title: "Post",
          content: "Here is a post",
          id: "",
        },
      };

      // Client-side routing
      window.addEventListener("hashchange", function (event) {
        const route = window.location.hash.substr(1);
        updateView(route);
      });

      // Update the view
      function updateView(route) {
        const app = document.getElementById("app");
        const page = pages[route] || pages.home;
        if (route === "home") {
          app.innerHTML = `
          <button id="link-button">
            <a href="#posting">게시글 작성하기</a>  
          </button>
          <h1>${page.title}</h1>
          <p>${page.content}</p>
          `;
        } else if (route === "posting") {
          console.log("this is posting page");
          app.innerHTML = `
          <h1>${page.title}</h1>
          <p>${page.content}</p>
          <div>BackButton</div>
          <img src="" alt="test"/>
          <form id="title" action="/submit" method="post">
            <input type="text" name="title" />
            <input type="text" name="contents" />
            </form>
            `;
          const postButton = document.getElementById("post-button");
          postButton.addEventListener("click", () => {
            postData();
          });
        } else if (route === "posts") {
          app.innerHTML = `
          <h1>${page.title}</h1>
          <p>${page.content}</p>`;
        }
      }

      // Initial view
      const initialRoute = window.location.hash.substr(1) || "home";
      console.log(initialRoute);
      updateView(initialRoute);
    </script>
  </body>
</html>
